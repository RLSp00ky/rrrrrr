<!doctype html> 
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta http-equiv="X-UA-Compatible" content="ie=edge" />
      <title>Soundlink - Social</title>
      <link rel="stylesheet" href="social.css" />
       <link id="site-favicon" rel="icon" type="image/png" href="icons/site-icon.png">
      <style>

         #loading-overlay {
           position: fixed;
           top: 0;
           left: 0;
           width: 100vw;
           height: 100vh;
           background: #000;
           display: flex;
           align-items: center;
           justify-content: center;
           z-index: 9999;
           flex-direction: column;
         }
         .spinner-container {
           position: relative;
           width: 200px;
           height: 200px;
           background: transparent;
         }
         .spinner {
           background: transparent;
           width: 100%;
           height: 100%;
           border: 10px solid gray;
           border-top: 10px solid white;
           border-radius: 50%;
           animation: spin 1s linear infinite;
         }
         #loading-logo {
           position: absolute;
           background: transparent;
           top: 53%;
           left: 110px;
           width: 200px;
           height: 200px;
           transform: translate(-50%, -50%);
           border-radius: 50%;
           z-index: 10;
         }
         @keyframes spin {
           0% { transform: rotate(0deg); }
           100% { transform: rotate(360deg); }
         }

      </style>
   </head>
   <body>

      <div id="loading-overlay">
         <div class="spinner-container">
            <div class="spinner"></div>
            <img id="loading-logo" src="icons/logo.png" alt="Logo" /> 
         </div>
      </div>

      <nav class="navbar">
         <img id="logo-img" src="icons/site-icon.png" width="70px" height="70px" /> 
         <h1>SoundLink</h1>
         <ul>
            <li><a class="tabs" href="index.html">Meet</a></li>
            <li class="indicator">Social</li>
            <li><a class="tabs" href="settings.html">Settings</a></li>
            <li><a class="logout" href="login.html">Logout</a></li>
         </ul>
      </nav>

      <main class="main-container">

         <aside id="friends-panel">
           <div class="friends-column-css">
             <h2>Friends</h2>
             <div id="friends-list" class="scrollable-friends">

             </div>
           </div>
         </aside>

         <section class="chat-section">
           <button id="scroll-to-bottom" style="
             position: absolute;
             bottom: 100px;
             
             right: 32%;
             display: none;
             padding: 10px 15px;
             border-radius: 25px;
             background-color: var(--card-border);
             color: var(--text-color);
             font-weight: bold;
             border: none;
             cursor: pointer;
             box-shadow: 0 2px 8px rgba(0,0,0,0.3);
             z-index: 100;
           ">Scroll to bottom</button>

           <div id="chat-container" style="display: none;">
            
             <div id="chat-header">
               <img id="chat-header-img" src="icons/default-avatar.png" alt="Profile">
               <h2 id="chat-header-username"></h2>
               <span id="chat-header-badges"></span> 
             </div>

             <div id="chat-messages"></div>
        
             <div id="chat-input">
               <input type="text" id="chat-message-input" placeholder="Type a message...">
               <input type="file" id="file-upload" style="display:none;" />
               <button id="upload-btn">upload</button>
               <button id="chat-send-btn">Send</button>
             </div>
           </div>
         </section>

      </main>

      <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
      <script src="database.js"></script>
      <script src="auth-manager.js"></script>
      <script src="social.js" type="module"></script>
   </body>
</html>